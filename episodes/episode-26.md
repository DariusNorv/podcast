# Выпуск №26

Chrome 52, Safari и MathML, `font-display`, WebP и WebM, HyperTerm, книги, путь фронтендера.

[Слушайте на SoundCloud](https://soundcloud.com/web-standards/episode-26), [обсуждайте в Слаке](https://web-standards.slack.com/messages/podcast/).

## 00:13 События

- [KharkivCSS](http://kharkivcss.org/) 17 сентября
- [LvivJS](http://lvivjs.org.ua/) 27 августа
- [HolyJS](http://holyjs.ru/) 10 декабря

## 02:17 Браузеры

- [Chrome 52: Contain Property, the PerfObserver API & SW Stream](https://youtu.be/Pii-LaWOyuo)
- [CSS Containment](https://developers.google.com/web/updates/2016/06/css-containment)
- [Performance Observer API](https://developers.google.com/web/updates/2016/06/performance-observer)
- [Performance measurements through `requestAnimationFrame`](http://www.quirksmode.org/blog/archives/2016/03/rafp_a_proposal.html)
- [Battery Status API](https://developer.mozilla.org/en/docs/Web/API/Battery_Status_API)
- [Service Worker Streamed Responses](https://developers.google.com/web/updates/2016/06/sw-readablestreams)

## 08:14 Safari и MathML

- [Release Notes for Safari Technology Preview Release 9](https://webkit.org/blog/6800/release-notes-for-safari-technology-preview-release-9/)
- [Improvements in MathML Rendering](https://webkit.org/blog/6803/improvements-in-mathml-rendering/)
- [MathML is a failed web standard](https://www.peterkrautzberger.org/0186/)

## 14:12 `font-display` в Firefox

- [Experimental `font-display` support in Firefox](https://github.com/zachleat/zachleat.com/issues/9)
- [Firefox Platform Status](https://platform-status.mozilla.org/)

## 18:12 Будущее WebP и WebM

- [Apple tests Google graphics format to speed up websites](http://www.cnet.com/news/apple-ios-macos-tests-googles-webp-graphics-to-speed-up-web/)
- [Lepton image compression: saving 22% losslessly from images at 15MB/s](https://blogs.dropbox.com/tech/2016/07/lepton-image-compression-saving-22-losslessly-from-images-at-15mbs/)

## 29:46 Зачем HyperTerm?

- [HyperTerm](https://hyperterm.org/)

## 37:32 Книги

- [ВСТ рекомендует книги](http://web-standards.ru/books/)
- [Practical SVG](https://abookapart.com/products/practical-svg)
- [High Performance Images](https://content.akamai.com/pg6293-high-performance-images-ebook.html) в [PDF](https://www.akamai.com/us/en/multimedia/documents/content/e-book/akamai-oreilly-high-performance-images-e-book.pdf)

## 40:00 Путь фронтендера

- Frontend Dev: [хороший](https://medium.com/p/865b640d5d18), [плохой](https://medium.com/p/aa99f3ce376), [злой](https://medium.com/p/5a4ec66fd457)

--

**Вадим.** Привет, с вами 26-й выпуск подкаста «Веб-стандарты» и его постоянные ведущие: Алексей Симоненко из HTML Academy. Ольга Алексашенко — верстальщица руками из «Exante»

**Ольга.** И Вадим Макеев из Opera.

## 00:13 События

**Вадим.** На этой неделе снова подвалило событий. Видимо, осень близко, зима близко. В общем, неожиданно появилась CSS-конференция. Мы все очень удивились, и наверное, это хороший знак, что, мол, JS, это не всё, что у нас есть, на самом деле, раз уж мы фулстек, ребята.
В Харькове будет [KharkivCSS](http://kharkivcss.org/) 17 сентября. Стоит это всё дело 250 гривен, ну это примерно 10 евро. Можно, в принципе, смело ехать, темы там интересные, ребята постарались в программе рассмотреть все области CSS, хотя вряд ли им удалось охватить прямо всё, но там есть Flexbox, Grid, по-моему, анимации, ещё что-то такое, в общем, программа выглядит довольно интересно, посмотрим, что из этого получится.

[LvivJS](http://lvivjs.org.ua/), мы говорили, будет 27 августа, в тот же самый день, когда будет [Frontend Union Conf](http://frontend-union.co/) в Вильнюсе, поэтому у вас тяжёлый выбор. LvivJS стоит 450 гривен — это где-то 17 евро, в общем, тоже не дорого и довольно интересно. Я в прошлом году был на LvivJS, выступал, было хорошо, и все ребята с опасениями по поводу, ехать во Львов или нет, там всё в порядке: отличный город, и меня классно приняли.

Ну и [HolyJS](http://holyjs.ru/). Ребята только зачехлили свою петербуржскую конференцию, чтобы вернуться в следующем году, как все думали, и тут раз, Москва. И «HolyJS» собираются провести конференцию по JavaScript, уж не знаю, сколько там дней будет, ну скорее всего один. 10 декабря в Москве. По опыту петербуржской конференции, которая стоила около 5000 рублей, видимо, они туже самую цену сделают и в Москве, может чуть дороже, но это было где-то около 70 евро, всем, кому проще считать в европейской валюте.

Ну и мы всё ближе к тому, чтобы анонсировать [WSD осенью](https://wsd.events/#calendar). Мы уже начинаем потихоньку определяться с Питером, а скорее всего будет 1 октября, но я пока не хочу бежать впереди поезда.

**Лёша.** Хотел сказать, что это между нами, никому не говорите.

**Вадим.** Да, никому.

## 02:17 Браузеры

**Вадим.** На этой неделе было немного новостей про браузеры.

Самое интересное, пожалуй, Пит Лепаж в видео [Chrome 52: Contain Property, the PerfObserver API & SW Stream](https://youtu.be/Pii-LaWOyuo) рассказал, какие новые вещи появились в Chrome 52, в стабильном, для разработчиков. Среди них, это [CSS Containment](https://developers.google.com/web/updates/2016/06/css-containment) позволяющая вам в CSS определять, как браузер будет рендерить определённые элементы. То есть, у нас до этого было свойство `will-change`, которое подсказывало браузеру, что этот элемент уж точно изменится, и вы могли указать как именно он изменится. Сейчас у нас есть возможность указать с помощью CSS Containment, спецификации, какая часть элемента будет изменяться, какие особенности элемента будут изменяться. То есть там есть значения layout, есть size, есть style. В общем, там есть группа элементов, и к этому видео есть три статьи, которые описывают каждую основную фичу в частности: там есть вот про CSS-свойства Contain. Можете почитать. Ну грубо говоря, если вы поняли, что какая-нибудь ваша бесконечная прокрутка с аккордеоном и плавающими снежинками поверх плохо работают, вы можете взять свойство `will-change`, которое поможет вам решить одни проблемы, вы можете взять ещё и CSS Containment, которое позволит улучшить в браузерах на основе Chromium ваши анимации, рендеринг и т.д. То есть полезно знать, если вы занимаетесь оптимизацией, но по-хорошему, этим должны заниматься все.

**Лёша.** А я хотел спросить. А на это свойство есть какая-та спецификация? Потому что как-то она прошла мимо, или ребята добавили это в W3C и нам можно ожидать её скорого появления и в других браузерах?

**Вадим.** Ну тут ведь как. W3C не W3C, а ребята хотят улучшать рендеринг в браузерах, давать разработчикам больше возможностей. Соответственно, есть всякие черновики, которые внедряются смело, даже если нет нормального статуса, как спецификация. Поэтому у CSS Containment есть спецификация, но ещё, как и десятки других спецификаций, рабочий черновик, который пока в других браузерах не собирается его применять. Но, у свойств `will-change`, у CSS Containment есть особенность — это штука не просто добавляет что-то на страницу, она улучшает страницу. То есть можно рассматривать её, как прогрессивное улучшение, например, если есть этот Containment, то браузер может вести себя чуть умнее и рендерить страницу лучше, а если его нет, ну значит браузер будет вести себя, как обычно. И на самом деле, если спросить меня, спросите-спросите, браузер должен всё делать самостоятельно. И эти свойства, это такие костыли, пожалуй, которые позволяют улучшать рендеринг прямо здесь и сейчас, но по-хорошему, я надеюсь, что в будущем они будут бесполезны. Конечно, если мы не придумаем очередной способ замедлить наш рендеринг.

Ещё к слову о быстродействии, ещё одна из возможностей, которая появилась в стабильном Chrome 52 — это [Performance Observer API](https://developers.google.com/web/updates/2016/06/performance-observer). Это такая штука, которая позволяет вам не писать самостоятельно какие-то штуки, которые определяют быстродействие вашего приложения на основе [Performance measurements through `requestAnimationFrame`](http://www.quirksmode.org/blog/archives/2016/03/rafp_a_proposal.html) (что-нибудь такое), а которое прямо говорят браузеру, мол, вы берёте API и, грубо говоря, следите за вашей страницей, и как только какие-то данные собираются, браузер через какой-нибудь промес отдаёт и говорит: «Вот данные». По идее, это можно использовать для профилирования ваших страниц, чтобы понять, что вообще у вас там медленно-быстро, собирать какие-то метрики и анализировать. Ну я тут подумал, что на самом деле ведь можно прогрессивно отключать и выключать какие-то части вашего интерфейса, которые, допустим, прям в рантайме приводит к тому, что браузер замедляется. То есть была статья, не так давно, про то, что на основе requestAnimationFrame можно анализировать, как ведёт себя страница. И тут же пришла критика, мол, как бы, нет, не всегда работает. И может Performance Observer позволит в рантайме определять, если страница работает медленно, можно, видимо, отключить какой-нибудь полупрозрачный background-blending-mode, который там всё жутко замедляет в одних браузерах, а в других работает нормально. Ну то есть прогрессивно оптимизировать страницу с помощью него, наверное, можно будет.

**Лёша.** Знаешь, когда мы и в прошлый раз тут вот обсуждали хак с requestAnimationFrame, я всё время вспоминаю, что у нас есть ведь классный [Battery Status API](https://developer.mozilla.org/en/docs/Web/API/Battery_Status_API), который рассказывает о том, в каком состоянии наша батарейка. Оно даже работает и на ноутбуках. И в этот момент хочется всегда реализовать такую штуку, чтобы, вот когда у тебя совсем мало батарейки, совсем уже садится, берёшь и отключаешь всё самое жрущие эту батарейку на своём сайте. И тогда тебе не придётся, например, закрывать Оперу и открывать Сафари, чтобы как-то получше было. Хотя, ты наверное уже так не делаешь, у вас же там новый режим появился. Веб-технологии на таком стыке, они мне кажутся вот очень интересными, когда ты вот прям до железки дотягиваешься.

**Вадим.**  _Фулстык_ разработчик. Ладно, давайте дальше, там есть ещё [Service Worker Streamed Responses](https://developers.google.com/web/updates/2016/06/sw-readablestreams). Грубо говоря, это такая штука, которая позволяет не дожидаться конца передачи данных, которые вы запросили в вашем Service Worker, и начинать обрабатывать их тут же. Мы привыкли к тому, что HTML-страницы начинают рендериться, даже пока длиннющая портянка не загрузилась целиком, браузер пытается рендерить с самого начала, тоже самое хорошо бы было делать с данными, потому что тот же самый Fetch, которым все пользуются, дожидается получения всех данных и только тогда начинает их обрабатывать. С этими потоками в Chrome 52 можно будет начинать рендерить заранее, точнее обрабатывать данные. В общем, как я уже говорил, там есть три статьи на эту тему: в каждой более подробно объясняется, что там нового.

## 08:14 Safari и MathML
 
**Лёша.** И на этой неделе как обычно, как и две недели назад, показали следующую версию [Release Notes for Safari Technology Preview Release 9](https://webkit.org/blog/6800/release-notes-for-safari-technology-preview-release-9/), в котором, как и в предыдущем, не так много интересного. Они, конечно, очень много фиксят, фиксят большое количество багов, но чтобы там сказать, как прошлые разы: «Теперь в Safari поддержка ES6 или, там, Grid», нет, ничего такого взрывающего, но тем не менее они шлифуют свой браузер, они его улучшают. Не знаю, что из этого всего перейдёт в релиз, который будет в сентябре, Safari, или в октябре, где-то в этом времени. Хотелось бы конечно всё, но есть ощущение, что перейдёт не всё. 

И есть такая испанская компания «Igalia», и как-то так получается, что она для Safari делает крутые штуки. До этого они законтребьютили поддержку Grid в Safari. Это не сама компания «Apple» сделала, а эту поддержку предложила отдельная компания, которая занимается консалтингом. И тут они решили продолжит свой путь, и переписать [Improvements in MathML Rendering](https://webkit.org/blog/6803/improvements-in-mathml-rendering/) в Safari. И вот мне немножко странно, потому что я вот эти штуки в вебе вижу на всём протяжении моей работы в вебе, и никогда не понимал, зачем они нужны. Ребята, вы же тоже наверняка часто слышали про такую штуку, как MathML, и что там можно делать какие-то формулы математические, но вы применяли это когда-нибудь вообще в своей жизни, на практике?

**Ольга.** Но это очень важная вещь, на самом деле, если ты набираешь какие-нибудь учебники или пособия, что угодно обучающее. Кстати, Лёша, тебе должно быть это очень близко по математике. Набрать формулы в вебе, а не в pdf, это очень трудно, поэтому я только рада, что эти технологии как-то развиваются. 

**Вадим.** Мы ещё сегодня будем говорить про образование, и что должен знать верстальщик и разработчик, и в частности там упоминается математика. Но это ближе к концу выпуска. А так все случаи, когда я вижу формулы в вебе, в 90% это какой-нибудь растр, скриншот из какого-нибудь математического софта, или в лучшем случае это SVG, когда кто-то просто экспортировал ту же самую графику, но в удобный векторный формат, чтобы нормально выглядел. MathML предлагает нам специальный язык, XML-подобный, как и HTML, так и SVG, который позволяет описывать формулы. И на самом деле все среды, в которых можно писать эти формулы, конструировать, позволяют экспортировать нормальный MathML. 

И совсем недавно был на эту тему пост [MathML is a failed web standard](https://www.peterkrautzberger.org/0186/), про то, как рабочая группа, которая занималась MathML, и вообще, человек, который принимал в этом участие, сказал, что как-то у нас ничего не получается, по-моему, мы провалились с MathML. И тут раз, видимо, по мотивам всего этого «Igalia» и «Webkit» объединились и получилась у нас обновлённая реализация MathML. Объясню, в чём вообще фишка. В HTML всё как-то просто: мы всё рендерим 16-и пиксельным Times, синие ссылки, и как бы всё просто. То есть базовый дефолтный рендеринг страницы довольно простой. И мы все видели, что дефолтные браузерные стили, это конечно длиннющие портянки, но ничего сложного в этом нет. С MathML всё немножко сложнее. С самого начала в браузере есть определённые конструкции, которые описывают, как рендерить MathML. Математически язык, вообще, довольно сложный, я имею ввиду язык записи формул. Там очень много вещей, которые могут испортить читабельность, если отрендерить неправильно. И в текущем виде формулы рендерить довольно плохо: элементы наезжали друг на друга, довольно-таки сложные комбинации, вы посмотрите на картинке, там, в общем-то, всё очень не просто. Это не просто какие-нибудь несколько линий, набранные Times, очень сложная комбинаторика элементов. Так вот её нужно по умному рендерить, и там десятки-сотни случаев сочетания этих элементов. Так вот одно из главных улучшений поддержки MathML в Webkit сейчас — это именно эта комбинаторика, когда элементы выглядят по-человечески, читабельно, и эти формулы можно анализировать просто, а не пытаться разобраться, мол, господи, что там написано. 

Ещё внутри MathML появились ссылки, это довольно интересно, потому что до сих пор, по-моему, атрибута ichref не было, и отдельным элементам нельзя было задать ссылки. Я не уверен, зачем внутри формул ссылки, наверное это полезно, но сама возможность, что в вебе наконец-то, в одной из веб-технологий появилась возможность добавлять ссылки (в SVG тоже можно ссылки добавлять), это очень хорошо. То есть, если математика вам близка, почитайте про то, как Apple рассказывает об этом в своём блоге, почитайте ещё одну статью, мы дадим ссылку. В общем, ситуация налаживается, и мне кажется, с точки зрения образования, с точки зрения нашей отрасли, знание математики важно, и поддержка правильного отображения формул, это, в общем-то, тоже поможет в образовательном смысле, потому что веб —самая главная платформа, издательская, мировая, и если там не поддерживается математика, значит это удар по математике, который нельзя допустить. 

**Лёша.** Это точно крутая спецификация, очень здорово, что она наконец-то как-то возрождается. Просто, я ещё раз повторюсь, я до этого применения для MathML в интернете не видел вообще. То есть когда были [TODO:] формулы, ты абсолютно правильно сказал, это всегда были картинки. 

**Ольга.** Ну значит будущее наступит рано или поздно.

**Вадим.** Ну да, это правильное движение, даже несмотря на то, что есть какой-то кризис в этом MathML-сообществе и в спецификации, всё равно правильный рендеринг всё поможет выпрямить. 

## 37:32 Книги

**Вадим.** У веб-стандартов кроме новостей и того, что вы все видите, есть ещё сайт, немножко старенький, но мы над этим работаем. И на этом сайте есть [раздел где мы рекомендуем книги](http://web-standards.ru/books/). Когда-то мы за ним следили, но сейчас он немножечко покрылся пылью, но в принципе его можно освежить, если вам интересно. Так вот, книги до сих пор издаются, книги до сих пор существуют и в принципе даже хорошие. И если раньше выходили всякие библии, которые домой было тяжело из книжного магазина вынести, то сейчас пришла пора книг не таких монолитных, не таких тяжелых. И в частности, одна из самых любимых мною серий называется A Book Apart, её сделали ребята из A List Apart – одной из самых старейших и уважаемых издательств и вообще сайтов в интернете на которых мы все учились, у меня даже пара футболок есть. Они уже давно издают серию A Book Apart и сейчас выходит очередная [книга про SVG](https://abookapart.com/products/practical-svg), её написал Крис Койер, довольно известный персонаж, это CSS-Tricks, это CodePen, думаю он написал хорошую штуку. Внимательно следите когда она будет выпущена, A Book Apart обычно выпускает бумажную версию за 15 $ и электронную – за 9 $, вместе дешевле, но в общем я очень рекомендую вам скачать ePub-версию как минимум, потому что это хорошо оформленные книжки с примерами, с ссылками, и от авторитетных авторов.

А ещё на этой неделе [Akamai](https://content.akamai.com/pg6293-high-performance-images-ebook.html) упомянутый сегодня с O’Reilly выложили [черновик книги про High Performance Images](https://www.akamai.com/us/en/multimedia/documents/content/e-book/akamai-oreilly-high-performance-images-e-book.pdf) от известных авторов, включая Йоава Вейсса, который собственно написал реализацию `<picture>` и лучше всех в нём разбирается. На самом деле оригинальная новость ведёт на форум, где нужно заполнить: где ты работаешь, что ты делаешь, что ты ел на завтрак и т.д., но сразу после этого вам на почту приходит ссылка на PDF, и вот её мы выложили прямо в новости, чтобы не тратить ваше время. Веб-стандарты – экономим ваше время, ха-ха. Так вот скачайте книжку, посмотрите, там не просто пара страница-превьюшечка, а там вполне себе чуть ли не целая книга, но видимо просто в черновом статусе.
